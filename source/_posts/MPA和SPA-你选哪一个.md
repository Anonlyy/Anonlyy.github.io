---
title: 'MPA和SPA,你选哪一个'
date: 2017-11-23 08:57:12
tags:
---

## 背景
旧的桌面应用程序被Web应用程序推到了极点。基于Web的应用程序使用起来非常方便，可以从多个设备访问，并且易于升级。对移动友好的复杂应用程序的需求正在上升。熟悉Web应用程序开发的您必须了解两种主要的Web设计类型：单页应用程序（SPA）和多页面应用程序（MPA）。


## 多页面应用程序(MultiPage Application，MPA)


![](https://user-gold-cdn.xitu.io/2017/11/17/15fc93684b5f10e1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)
`MPA`的工作遵循传统模式，即每次更改都会重新提交，或者从服务器显示为新的页面。鉴于这些应用程序的性质，它们的大小以适应其功能。内容的巨大增加给应用程序提供了多层UI的复杂性。侵入的复杂性是在21世纪初引入的`AJAX`（异步JavaScript和XML），这使得仅仅刷新网站的一部分而不是重新提交整个页面成为可能。尽管它极大地改善了用户体验，但却为页面增添了一层复杂性。与`SPA`的直接方法相比，`MPA`的发展是复杂的。

### MPA的优点

1. `MPA`方法最适合那些设计为视觉地图的网站。多级菜单导航是传统`MPA`的核心。
2. 开发成本和学习门槛较低,易于上手。
3. SEO搜索引擎优化管理是有效的，因为不同的关键字可以优化每个应用程序的一个关键字。

### MPA的弱点

1. `MPA`资源不共用，每个页面都需要加载,这就意味着大部分页面的部分代码和资源都是重复加载的.
2. **用户体验**较差,多页面切换会造成整页刷新,加载缓慢,流畅度也不足,且无法实现转场动画。
3. 传统前后端开发模式,非前后端分离,导致不够高效。



## 单页应用程序(SinglePage Web Application，SPA)

![](https://user-gold-cdn.xitu.io/2017/11/17/15fc93562b418a6e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

简单点说,`SPA`就是只有一个Web页面的应用，单页应用程序 (SPA) 是加载单个HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序。 浏览器一开始会加载必需的HTML、CSS和JavaScript，所有的操作都在这张页面上完成，都由JavaScript来控制。

### 怎么实现无刷新的呢?
那就是History API.
`History API`是HTML5 的历史记录 API。这套 API 提供一种「人为操纵」浏览器历史记录的方法,可以实现无刷新更改地址栏链接，配合 AJAX 可以做到无刷新跳转。
简单来说：假设当前页面为xposean.xin/，那么执行下面的 JavaScript 语句：

	window.history.pushState(null, null, "/profile/");


之后，地址栏的地址就会变成xposean.xin/profile/，但同时浏览器不会刷新页面，甚至不会检测目标页面是否存在。

#### pushState方法

浏览器历史记录可以看作一个「栈」。栈是一种后进先出的结构，可以把它想象成一摞盘子，用户每点开一个新网页，都会在上面加一个新盘子，叫「入栈」。用户每次点击「后退」按钮都会取走最上面的那个盘子，叫做「出栈」。而每次浏览器显示的自然是最顶端的盘子的内容。

执行pushState函数之后，会往浏览器的历史记录中添加一条新记录，同时改变地址栏的地址内容。它可以接收三个参数，按顺序分别为：

1. 一个对象或者字符串，用于描述新记录的一些特性。这个参数会被一并添加到历史记录中，以供以后使用。这个参数是开发者根据自己的需要自由给出的。
2. 一个字符串，代表新页面的标题。当前基本上所有浏览器都会忽略这个参数。
3. 一个字符串，代表新页面的相对地址。

		var state = {
		    id: 2,
		    name: "profile"
		};
		window.history.pushState(state, "My Profile", "/profile/");

#### replaceState 方法
有时，你希望不添加一个新记录，而是替换当前的记录（比如对网站的 loading-page），则可以使用replaceState方法。这个方法和pushState的参数完全一样。


### SPA的优点
1. 分离前后端关注点，前端负责view，后端负责model，各司其职； 
2. 服务器只接口提供数据，不用展示逻辑和页面合成，提高性能； 
3. 同一套后端程序代码，不用修改兼容Web界面、手机； 
4. 用户体验好、快，内容的改变不需要重新加载整个页面 
5. 可以缓存较多数据，减少服务器压力 
6. 单页应用像网络一样，几乎随处可以访问—不像大多数的桌面应用，用户可以通过任务网络连接和适当的浏览器访问单页应用。如今，这一名单包括智能手机、平板电脑、电视、笔记本电脑和台式计算机。 




### SPA的缺点： 
1. SEO问题
2. 首次加载时间较长。 
3. 页面复杂度提高很多，复杂逻辑难度成倍,意味着开发成本和学习成本的提高。
