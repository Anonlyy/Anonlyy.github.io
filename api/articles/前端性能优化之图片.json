{"title":"前端性能优化之图片","uid":"2d7c0bd2df6d999d4495f99378b1f4d4","slug":"前端性能优化之图片","date":"2018-10-27T02:11:26.000Z","updated":"2022-03-30T02:35:15.671Z","comments":true,"path":"api/articles/前端性能优化之图片.json","keywords":null,"cover":"https://image.xposean.top/blogImage/0010.png","content":"<h2 id=\"前端优化中图片优化必要性\"><a href=\"#前端优化中图片优化必要性\" class=\"headerlink\" title=\"前端优化中图片优化必要性\"></a>前端优化中图片优化必要性</h2><p>在我们前端优化的种种方案中,包括js、html、css文件的打包压缩合并到极致,我们节省的空间至多也就是几十K的大小,但是在图片领域能够优化的空间,往往能够达到几百k到几M的范畴,这对于一个页面而言,优化力度可是极大的.所以在前端优化中,图片的优化是至关重要的.</p>\n<h2 id=\"图片格式认知\"><a href=\"#图片格式认知\" class=\"headerlink\" title=\"图片格式认知\"></a>图片格式认知</h2><p>目前在项目开发中常见的图片格式,包括有:</p>\n<ul>\n<li>jpg</li>\n<li>png</li>\n<li>gif</li>\n<li>svg</li>\n<li>WebP</li>\n</ul>\n<h3 id=\"jpg格式\"><a href=\"#jpg格式\" class=\"headerlink\" title=\"jpg格式\"></a>jpg格式</h3><p> <code>jpg</code> 全称叫做<code>jpeg</code>,<code>.jpg</code>和<code>.jpeg</code>这两种扩展名的实质是相同的，但因为DOS时代的8.3文件名命名原则是:拓展名不能超过三位,所以直接用作<code>.jpg</code>,虽然现在windows也可以支持任意长度的扩展名了，但大家已经习惯了.jpg的叫法，因此也就没有强制修正.</p>\n<h4 id=\"baseline-jpeg\"><a href=\"#baseline-jpeg\" class=\"headerlink\" title=\"baseline-jpeg\"></a>baseline-jpeg</h4><h4 id=\"progressive-jpeg\"><a href=\"#progressive-jpeg\" class=\"headerlink\" title=\"progressive-jpeg\"></a>progressive-jpeg</h4><p> <img src=\"http://7tszky.com1.z0.glb.clouddn.com/Fo8q3huYFyQma_rsSvo28dUyd7mN\"><br> jpeg优势： 非常通用，图片更小<br> jpeg劣势： 图片色彩不够丰富,且不支持透明.</p>\n<h3 id=\"PNG格式\"><a href=\"#PNG格式\" class=\"headerlink\" title=\"PNG格式\"></a>PNG格式</h3><p> <code>PNG</code>,可移植网络图形格式,这种类型的图片可以展示 256 种颜色，而且每一种颜色都可以做成透明,所以这类图片我们常用来做透明和半透明的素材,缺点则是体积较大.</p>\n<h3 id=\"GIF格式\"><a href=\"#GIF格式\" class=\"headerlink\" title=\"GIF格式\"></a>GIF格式</h3><p> <code>GIF</code>,一般都理解为gif动画,其实<code>GIF</code>也可以存储图片,同时也支持透明,但作为图片,<code>GIF</code>只支持透明和不透明,不支持半透明,而且相对于<code>png</code>的图片,<code>GIF</code>的占用空间更大,它的唯一优势在于它是支持动画,而其他格式都不支持,所以一般我们图片是不使用<code>GIF</code>格式,只有在用动画的情况才使用。</p>\n<h3 id=\"svg格式\"><a href=\"#svg格式\" class=\"headerlink\" title=\"svg格式\"></a>svg格式</h3><p> 可缩放矢量图形，属于 XML 格式，百度地图就是使用 svg 绘制的，位图当你放大时单位面积内可视的像素点会变少，所以会失真，也就是我们常说的图片模糊，首先 svg 它是一个可以进行计算矢量图，放大和缩小的时每一个像素会根据向量重新计算，不会失真，并且 svg 的体积很小。</p>\n<h3 id=\"WebP\"><a href=\"#WebP\" class=\"headerlink\" title=\"WebP\"></a>WebP</h3><p> 是 Google 于2010年提出了一种新的图片压缩格式，<code>WebP</code> 为网络图片提供了无损和有损压缩能力，同时在有损条件下支持透明通道；无损 <code>WebP</code> 相比 <code>PNG</code> 减少26%大小，有损 <code>WebP</code> 在相同的结构相似性下相比 <code>JPEG</code> 减少 25%~34% 的大小，所以它也同时具备 <code>jpg</code> 和 <code>png</code> 的优点。<br> 简单来说就是,体积比<code>jpeg</code>更小,而且还支持透明和半透明,渲染速度更快。<br> 但在兼容性上只支持Chrome(29+)、Opera、和Android Brower,firefox和safari都不支持.<br> <img src=\"http://static.zybuluo.com/jasminecjc/z1ik03y2es81x990qq35hutz/1.png\"></p>\n<h3 id=\"图片使用\"><a href=\"#图片使用\" class=\"headerlink\" title=\"图片使用\"></a>图片使用</h3><p> 说着这么多的图片类型，我们在项目开发中，如何基于性能和用户体验的权衡来选择合适的图片类型呢？</p>\n<p> 如果是颜色丰富的图片，jpg 是通用的选择。<br> 如果是较通用的动画，gif 是唯一可用的选择。<br> 如果需要清晰的显示颜色丰富和透明的图片，png 是比较好的选择。<br> 如果是企业级应用（不考虑兼容性），可以选择 WebP。</p>\n<h2 id=\"目前比较流行的做法\"><a href=\"#目前比较流行的做法\" class=\"headerlink\" title=\"目前比较流行的做法\"></a>目前比较流行的做法</h2><h4 id=\"压缩图片\"><a href=\"#压缩图片\" class=\"headerlink\" title=\"压缩图片\"></a>压缩图片</h4><p> 智图: <a href=\"http://zhitu.isux.us/\" title=\"智图\">http://zhitu.isux.us/ </a><br> Kraken: <a href=\"https://kraken.io/\" title=\"Kraken \">https://kraken.io/</a></p>\n<h4 id=\"CSS-Sprites-雪碧图\"><a href=\"#CSS-Sprites-雪碧图\" class=\"headerlink\" title=\"CSS Sprites(雪碧图)\"></a>CSS Sprites(雪碧图)</h4><p> <strong>场景</strong>：任何用到页面图片的场景<br> <strong>原理</strong>：将多个页面上用到的背景图片合并成一个大的图片在页面中引用<br> <strong>优势</strong>：可以有效的较少请求个数，而且，而不影响开发体验，使用构建插件可以做到对开发者透明。适用于页面图片多且丰富的场景。<br> <strong>劣势</strong>：生成的图片体积较大，减少请求个数同时也增加了图片大小，不合理拆分将不利于并行加载。</p>\n<h4 id=\"使用base64编码代替图片\"><a href=\"#使用base64编码代替图片\" class=\"headerlink\" title=\"使用base64编码代替图片\"></a>使用base64编码代替图片</h4><p> 适用于图片大小小于2KB，页面上引用图片总数不多的情况,可以减少http请求。</p>\n<h4 id=\"iconfont、CSS3代替图片\"><a href=\"#iconfont、CSS3代替图片\" class=\"headerlink\" title=\"iconfont、CSS3代替图片\"></a>iconfont、CSS3代替图片</h4><p> css方式可以用来绘制相对简单的图来代替图片，一般使用before或者after伪元素来丰富图案的复杂度。<br> iconfont可以代替传统图片的icon.<br> 这两种方式都是为了减少网页中图片的使用。</p>\n<h4 id=\"响应式动态图片加载\"><a href=\"#响应式动态图片加载\" class=\"headerlink\" title=\"响应式动态图片加载\"></a>响应式动态图片加载</h4><p> <strong>场景</strong>：不同终端对同一个图片需求不一样，可以根据终端加载不同的图片来节省没必要的流量<br> <strong>原理</strong>：通过picture元素，picturefill或平台判断来为不同终端平台输出不同的图片<br> <strong>优势</strong>：减少没必要的图片加载，灵活控制，慢速用户加载小图片不至于加载失败，移动端没必要加载大尺寸图片等，可以通过不同方式兼容所有浏览器<br> <strong>劣势</strong>：无法避免图片的加载过程，图片本身没优化</p>\n","text":"前端优化中图片优化必要性在我们前端优化的种种方案中,包括js、html、css文件的打包压缩合并到极致,我们节省的空间至多也就是几十K的大小,但是在图片领域能够优化的空间,往往能够达到几百k到几M的范畴,这对于一个页面而言,优化力度可是极大的.所以在前端优化中,图片的优化是至关重...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"前端","slug":"前端","count":13,"path":"api/categories/前端.json"}],"tags":[{"name":"前端","slug":"前端","count":13,"path":"api/tags/前端.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96%E4%B8%AD%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96%E5%BF%85%E8%A6%81%E6%80%A7\"><span class=\"toc-text\">前端优化中图片优化必要性</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%BE%E7%89%87%E6%A0%BC%E5%BC%8F%E8%AE%A4%E7%9F%A5\"><span class=\"toc-text\">图片格式认知</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#jpg%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">jpg格式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#baseline-jpeg\"><span class=\"toc-text\">baseline-jpeg</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#progressive-jpeg\"><span class=\"toc-text\">progressive-jpeg</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#PNG%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">PNG格式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#GIF%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">GIF格式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#svg%E6%A0%BC%E5%BC%8F\"><span class=\"toc-text\">svg格式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#WebP\"><span class=\"toc-text\">WebP</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%BE%E7%89%87%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">图片使用</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%89%8D%E6%AF%94%E8%BE%83%E6%B5%81%E8%A1%8C%E7%9A%84%E5%81%9A%E6%B3%95\"><span class=\"toc-text\">目前比较流行的做法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87\"><span class=\"toc-text\">压缩图片</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#CSS-Sprites-%E9%9B%AA%E7%A2%A7%E5%9B%BE\"><span class=\"toc-text\">CSS Sprites(雪碧图)</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8base64%E7%BC%96%E7%A0%81%E4%BB%A3%E6%9B%BF%E5%9B%BE%E7%89%87\"><span class=\"toc-text\">使用base64编码代替图片</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#iconfont%E3%80%81CSS3%E4%BB%A3%E6%9B%BF%E5%9B%BE%E7%89%87\"><span class=\"toc-text\">iconfont、CSS3代替图片</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8A%A8%E6%80%81%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD\"><span class=\"toc-text\">响应式动态图片加载</span></a></li></ol></li></ol></li></ol>","author":{"name":"Xposean","slug":"blog-author","avatar":"https://cdn.xposean.top/smallStack/dist/img/avatar.6354a35.png","link":"/","description":"做一个刚刚好的前端仔","socials":{"github":"https://github.com/Anonlyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.im/user/1451011078620568","customs":{"site":{"icon":"/image/site_logo.png","link":"https://www.xposean.top"}}}},"mapped":true,"prev_post":{"title":"来聊聊优雅的Icon","uid":"6f52155d9c00c8a7ee0e0860b268d01b","slug":"来聊聊优雅的icon","date":"2019-01-24T01:31:38.000Z","updated":"2022-03-30T02:35:15.674Z","comments":true,"path":"api/articles/来聊聊优雅的icon.json","keywords":null,"cover":"https://image.xposean.top/blogImage/004.png","text":"前言在做前端后台项目的时候经常会用到很多 icon 图标，刚开始还好，但随着项目的不断迭代，每次修改添加图标会变得很麻烦，而且总觉得不够优雅，就开始琢磨着有啥简单方便的工作流呢？ Icon发展史雪碧图在我刚开始实习时，大部分图标都是用 img 来实现的。渐渐发现一个页面的请求资源...","link":"","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":13,"path":"api/categories/前端.json"}],"tags":[{"name":"前端","slug":"前端","count":13,"path":"api/tags/前端.json"}],"author":{"name":"Xposean","slug":"blog-author","avatar":"https://cdn.xposean.top/smallStack/dist/img/avatar.6354a35.png","link":"/","description":"做一个刚刚好的前端仔","socials":{"github":"https://github.com/Anonlyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.im/user/1451011078620568","customs":{"site":{"icon":"/image/site_logo.png","link":"https://www.xposean.top"}}}}},"next_post":{"title":"JavaScript的高级运用之节流与防抖","uid":"7b6c80c82769c35e7a6f32b608c38d88","slug":"JavaScript的高级运用节流与防抖","date":"2018-05-17T01:33:34.000Z","updated":"2022-03-30T02:35:15.665Z","comments":true,"path":"api/articles/JavaScript的高级运用节流与防抖.json","keywords":null,"cover":"https://image.xposean.top/blogImage/0021.png","text":"概念与目的首先还是得先来讲讲概念,节流和防抖的目的都十分的简单,就是为了性能优化而出现的,目的是为了解决一些短时间内连续执行导致性能不佳或者内存消耗巨大的情况。这类事件有:scroll keyup mousemove resize事件等，短时间内会不断的触发，在性能上消耗是非常大...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"JavaScript","slug":"JavaScript","count":5,"path":"api/categories/JavaScript.json"}],"tags":[{"name":"JavaScript","slug":"JavaScript","count":5,"path":"api/tags/JavaScript.json"}],"author":{"name":"Xposean","slug":"blog-author","avatar":"https://cdn.xposean.top/smallStack/dist/img/avatar.6354a35.png","link":"/","description":"做一个刚刚好的前端仔","socials":{"github":"https://github.com/Anonlyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.im/user/1451011078620568","customs":{"site":{"icon":"/image/site_logo.png","link":"https://www.xposean.top"}}}}}}